# Template file for 'gprbuild-bootstrap'
pkgname=gprbuild-bootstrap
version=25.0.0
revision=1
short_desc="Advanced build system for multi-language programs - bootstrap package"
maintainer="Estevan Castilho <estevan.cps@gmail.com>"
license=GPL-3.0-or-later
homepage="https://github.com/AdaCore/gprbuild"
distfiles="
	https://github.com/AdaCore/gprbuild/archive/refs/tags/v${version}.tar.gz>gprbuild-${version}.tar.gz
	https://github.com/AdaCore/xmlada/archive/refs/tags/v${version}.tar.gz>xmlada-${version}.tar.gz
	https://github.com/AdaCore/gprconfig_kb/archive/refs/tags/v${version}.tar.gz>gprconfig_kb-${version}.tar.gz"
checksum="
	d12f94c1ec0b6e219f6b162f71f57129d22426e7798092f5f85b9ec2cc818bf1
	dbb5984a0931311c7a787a679ef4cfaeeedd357474a585dc170140ef2251dcca
	802e6d38a3b110897924a9c16e143cb86360f2dde94bb5b9144c7c391e37b121"

hostmakedepends="gcc-ada"

do_build() {
	cd "gprbuild-${version}"
	./bootstrap.sh \
		--with-xmlada="../xmlada-${version}" \
		--with-kb="../gprconfig_kb-${version}" \
		--build
}

do_install() {
	cd "gprbuild-${version}"
	./bootstrap.sh \
		--with-kb="../gprconfig_kb-${version}" \
		--prefix="$DESTDIR/usr" \
		--install
}
